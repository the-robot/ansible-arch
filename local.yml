---

- hosts: localhost
  connection: local
  become: true

  tasks:
  # Install packages
  - name: install essential tools
    package:
      name:
        - wget
        - neofetch
        - htop
        - tmux
        - neovim
        - zsh
        - fzf
        - alacritty
        - firefox
        - qbittorrent

  - name: install developer tools
    package:
      name:
        - nmap
        - vscode
        - filezilla
        - aws-cli
        - docker
        - kubectl
        - minikube
        - terraform
  
  # - name: install spotify
  #   local_action: command sh scripts/install-spotify.sh
  
  # Yay package manager for linux
  - name: install yay package manager
    local_action: command sh scripts/install-yay.sh

  # Install packages with yay
  # - Spotify
  # - Postman
  - name: install packages with yay
    local_action: command sh scripts/install-postman.sh
    become: yes
    become_user: robot
    ansible.builtin.shell: |
      if ! command -v "spotify" &> /dev/null
      then
        yay -a -Sy --noconfirm --cleanafter spotify
      fi

      if ! command -v "postman" &> /dev/null
      then
        yay -a -Sy --noconfirm --cleanafter postman-bin
      fi

      yay --clean --noconfirm

  # Set wallpaper
  # - name: copy wallpaper file
  #   copy:
  #     src: files/wallpaper.png
  #     dest: /usr/share/backgrounds/wallpaper.png
  #     owner: root
  #     group: root
  
  # - name: set wallpaper
  #   dconf:
  #     key: "/org/gnome/desktop/background/picture-uri"
  #     value: "'file:///usr/share/backgrounds/wallpaper.png'"
  
  # - name: set wallpaper
  #   dconf:
  #     key: "/org/gnome/desktop/background/picture-options"
  #     value: "'zoom'"
